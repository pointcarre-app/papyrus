<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="PCA Papyrus - Advanced Calculus Example" />
    <title>PCA Papyrus - Advanced Calculus</title>
    <link rel="stylesheet" href="../src/styles/index.css" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Spectral:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600&family=JetBrains+Mono:wght@400;500&display=swap"
          rel="stylesheet" />

    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <link href="https://cdn.jsdelivr.net/npm/daisyui@5" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" />
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>

    <style>
        .font-heading {
            font-family: 'Spectral', serif;
        }

        .font-body {
            font-family: 'Inter', sans-serif;
        }

        .font-mono {
            font-family: 'JetBrains Mono', monospace;
        }

        .controls-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
        }

        .form-section {
            background: rgba(255, 255, 255, 0.7);
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 1rem;
        }

        .example-badge {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 20px;
            display: inline-block;
        }
    </style>

    <script>
        window.process = {
            env: {
                NODE_ENV: 'development'
            }
        };
    </script>
  </head>

  <body class="bg-gray-50 font-body">
    <div class="min-h-screen">
      <header class="bg-white border-b border-gray-200 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div class="flex justify-between items-center py-4">
            <div class="flex items-center">
              <h1 class="font-heading font-bold text-xl text-gray-900">PCA Papyrus</h1>
              <span class="ml-3 text-sm text-gray-500">Advanced Calculus Example</span>
            </div>
            <nav class="flex space-x-4">
              <a href="index.html" class="text-gray-600 hover:text-gray-900 transition-colors">Main Demo</a>
              <a href="geometry-worksheet.html" class="text-gray-600 hover:text-gray-900 transition-colors">Geometry</a>
            </nav>
          </div>
        </div>
      </header>

      <main class="max-w-full mx-auto px-4 sm:px-6 lg:px-4 py-6">
        <div class="example-badge">ðŸ“š Advanced Calculus Example - Integrals & Applications</div>

        <h1 class="font-heading font-semibold text-gray-900 border-b border-gray-200 mb-8">
          Advanced Calculus - Integration Techniques
        </h1>

        <div class="grid grid-cols-1 xl:grid-cols-[30%_70%] gap-8">
          <!-- Left Side: JSON + Controls -->
          <div class="space-y-6">
            <!-- JSON Input -->
            <div>
              <div class="flex items-center justify-between mb-4">
                <h2 class="text-lg font-heading font-medium text-gray-900">JSON Content</h2>
                <div class="flex gap-2">
                  <button onclick="loadCalculusExample()" class="btn btn-xs btn-primary">Load Calculus</button>
                  <button onclick="clearJSON()" class="btn btn-xs btn-outline">Clear</button>
                </div>
              </div>
              <textarea id="json-input"
                        placeholder="Advanced calculus content will be loaded here..."
                        class="w-full h-80 font-mono text-sm p-3 border border-gray-300 rounded-md resize-vertical focus:ring-2 focus:ring-blue-500 focus:border-transparent"></textarea>
            </div>

            <!-- Controls -->
            <div>
              <h2 class="text-lg font-heading font-medium text-gray-900 mb-6">Settings</h2>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Page Layout -->
                <div class="form-section">
                  <h3 class="font-heading font-medium text-gray-800 mb-3">Page Layout (mm)</h3>
                  <form id="margin-form" class="grid grid-cols-3 gap-3">
                    <div class="form-control">
                      <label class="label py-1">
                        <span class="label-text text-xs text-gray-600">Top</span>
                      </label>
                      <input class="input input-xs border-gray-300"
                             type="number"
                             id="margin-top"
                             name="margin-top"
                             min="1"
                             max="50"
                             step="1"
                             value="5" />
                    </div>
                    <div class="form-control">
                      <label class="label py-1">
                        <span class="label-text text-xs text-gray-600">Right</span>
                      </label>
                      <input class="input input-xs border-gray-300"
                             type="number"
                             id="margin-right"
                             name="margin-right"
                             min="0"
                             max="50"
                             step="1"
                             value="5" />
                    </div>
                    <div class="form-control">
                      <label class="label py-1">
                        <span class="label-text text-xs text-gray-600">Bottom</span>
                      </label>
                      <input class="input input-xs border-gray-300"
                             type="number"
                             id="margin-bottom"
                             name="margin-bottom"
                             min="0"
                             max="50"
                             step="1"
                             value="5" />
                    </div>
                    <div class="form-control">
                      <label class="label py-1">
                        <span class="label-text text-xs text-gray-600">Left</span>
                      </label>
                      <input class="input input-xs border-gray-300"
                             type="number"
                             id="margin-left"
                             name="margin-left"
                             min="0"
                             max="50"
                             step="1"
                             value="5" />
                    </div>
                    <div class="form-control">
                      <label class="label py-1">
                        <span class="label-text text-xs text-gray-600">Space</span>
                      </label>
                      <input class="input input-xs border-gray-300"
                             type="number"
                             id="space-between-divs"
                             name="space-between-divs"
                             min="0"
                             max="20"
                             step="1"
                             value="3" />
                    </div>
                  </form>
                </div>

                <!-- Font Sizes -->
                <div class="form-section">
                  <h3 class="font-heading font-medium text-gray-800 mb-3">Font Sizes (px)</h3>
                  <form id="font-form" class="grid grid-cols-4 gap-2">
                    <div class="form-control">
                      <label class="label py-1">
                        <span class="label-text text-xs text-gray-600">H1</span>
                      </label>
                      <input class="input input-xs border-gray-300"
                             type="number"
                             id="font-h1"
                             name="font-h1"
                             min="8"
                             max="72"
                             step="1"
                             value="32" />
                    </div>
                    <div class="form-control">
                      <label class="label py-1">
                        <span class="label-text text-xs text-gray-600">H2</span>
                      </label>
                      <input class="input input-xs border-gray-300"
                             type="number"
                             id="font-h2"
                             name="font-h2"
                             min="8"
                             max="64"
                             step="1"
                             value="28" />
                    </div>
                    <div class="form-control">
                      <label class="label py-1">
                        <span class="label-text text-xs text-gray-600">H3</span>
                      </label>
                      <input class="input input-xs border-gray-300"
                             type="number"
                             id="font-h3"
                             name="font-h3"
                             min="8"
                             max="56"
                             step="1"
                             value="24" />
                    </div>
                    <div class="form-control">
                      <label class="label py-1">
                        <span class="label-text text-xs text-gray-600">Body</span>
                      </label>
                      <input class="input input-xs border-gray-300"
                             type="number"
                             id="font-body"
                             name="font-body"
                             min="8"
                             max="24"
                             step="1"
                             value="14" />
                    </div>
                  </form>
                </div>

                <!-- Display Options -->
                <div class="form-section">
                  <h3 class="font-heading font-medium text-gray-800 mb-3">Display Options</h3>
                  <div class="space-y-2">
                    <label class="flex items-center gap-2 cursor-pointer">
                      <input type="checkbox" id="debug-mode" class="checkbox checkbox-sm" />
                      <span class="text-sm text-gray-700">Show element borders & dimensions</span>
                    </label>
                    <label class="flex items-center gap-2 cursor-pointer">
                      <input type="checkbox" id="show-page-numbers" class="checkbox checkbox-sm" />
                      <span class="text-sm text-gray-700">Show page numbers at top</span>
                    </label>
                  </div>
                </div>

                <!-- Statistics -->
                <div class="form-section md:col-span-2">
                  <h3 class="font-heading font-medium text-gray-800 mb-3">Content Statistics</h3>
                  <div id="statistics-container" class="text-sm text-gray-600">
                    <!-- Statistics will be dynamically inserted here -->
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Right Side: Preview -->
          <div>
            <div class="mx-auto px-4 sm:px-6 lg:px-8">
              <div class="flex items-center justify-between h-16">
                <div class="flex items-center gap-3">
                  <button onclick="generatePages()" class="btn btn-sm btn-primary">Generate</button>
                  <button onclick="printPage()" class="btn btn-sm btn-outline">Print</button>
                </div>
              </div>
            </div>
            <h2 class="text-lg font-heading font-medium text-gray-900 mb-4">
              A4 Preview <span class="text-sm font-normal text-gray-500">(Advanced Calculus Exam)</span>
            </h2>
            <div id="pages-container"></div>
          </div>
        </div>
      </main>
    </div>

    <script type="module" src="../src/core/app-init.js"></script>
    <script>
        // Advanced Calculus Example Content
        function loadCalculusExample() {
            const calculusContent = [{
                "id": "exam-header",
                "html": "<table style='width: 100%; border-collapse: collapse; border: 2px solid #000;'><tr><td style='border: 1px solid #000; padding: 10px; width: 60%; font-weight: bold;'>MATHEMATICS DEPARTMENT<br />Advanced Calculus II - Final Examination<br />Duration: 3 hours | Total Points: 100</td><td style='border: 1px solid #000; padding: 10px; width: 40%;'><strong>Name:</strong> _________________________<br /><strong>Student ID:</strong> ____________________<br /><strong>Date:</strong> _________________________</td></tr></table>",
                "isPapyrusHeader": true,
                "style": "margin-bottom: 20mm;"
            }, {
                "id": "instructions",
                "html": "<div style='background: #e3f2fd; padding: 15px; border-radius: 8px; border-left: 4px solid #1976d2;'><strong>Instructions:</strong><br />â€¢ Show all work clearly and justify your answers<br />â€¢ Partial credit will be awarded for correct methods<br />â€¢ Use exact values where possible<br />â€¢ Total time: 180 minutes</div>",
                "style": "margin-bottom: 20px;"
            }, {
                "id": "section-1-title",
                "html": "<h2 style='background: #f5f5f5; padding: 10px; border-radius: 5px; border-left: 5px solid #ff5722;'>Section I: Integration Techniques (30 points)</h2>",
                "style": "margin: 25px 0 15px 0;"
            }, {
                "id": "problem-1",
                "html": "<div><strong>Problem 1 (10 points):</strong> Evaluate the following integral using integration by parts:<br /><br />$$\\int x^2 e^{3x} dx$$<br /><br /><em>Show all steps clearly.</em></div>",
                "style": "margin: 15px 0; padding: 15px; background: #fafafa; border-radius: 5px;"
            }, {
                "id": "problem-2",
                "html": "<div><strong>Problem 2 (10 points):</strong> Use partial fractions to evaluate:<br /><br />$$\\int \\frac{x^2 + 3x + 1}{(x+1)(x-2)(x+3)} dx$$</div>",
                "style": "margin: 15px 0; padding: 15px; background: #fafafa; border-radius: 5px;"
            }, {
                "id": "problem-3",
                "html": "<div><strong>Problem 3 (10 points):</strong> Evaluate using trigonometric substitution:<br /><br />$$\\int \\frac{x^2}{\\sqrt{9-x^2}} dx$$<br /><br /><em>Hint: Use $x = 3\\sin\\theta$</em></div>",
                "style": "margin: 15px 0; padding: 15px; background: #fafafa; border-radius: 5px;"
            }, {
                "id": "section-2-title",
                "html": "<h2 style='background: #f5f5f5; padding: 10px; border-radius: 5px; border-left: 5px solid #4caf50;'>Section II: Applications of Integration (40 points)</h2>",
                "style": "margin: 30px 0 15px 0;"
            }, {
                "id": "problem-4",
                "html": "<div><strong>Problem 4 (15 points):</strong> Find the area between the curves:<br /><br />$y = x^2 - 4x + 3$ and $y = -x^2 + 2x + 3$<br /><br />Include a sketch of the region and set up the integral(s) needed.</div>",
                "style": "margin: 15px 0; padding: 15px; background: #fafafa; border-radius: 5px;"
            }, {
                "id": "problem-5",
                "html": "<div><strong>Problem 5 (12 points):</strong> Find the volume of the solid generated by revolving the region bounded by $y = \\sqrt{x}$, $y = 0$, and $x = 4$ about:<br /><br />(a) the x-axis using the disk method<br />(b) the line $x = 4$ using the shell method</div>",
                "style": "margin: 15px 0; padding: 15px; background: #fafafa; border-radius: 5px;"
            }, {
                "id": "problem-6",
                "html": "<div><strong>Problem 6 (13 points):</strong> A tank has the shape of an inverted circular cone with base radius 6 feet and height 8 feet. If water is pumped into the tank at a rate of 2 cubic feet per minute, how fast is the water level rising when the water is 3 feet deep?</div>",
                "style": "margin: 15px 0; padding: 15px; background: #fafafa; border-radius: 5px;"
            }, {
                "id": "section-3-title",
                "html": "<h2 style='background: #f5f5f5; padding: 10px; border-radius: 5px; border-left: 5px solid #9c27b0;'>Section III: Infinite Series (30 points)</h2>",
                "style": "margin: 30px 0 15px 0;"
            }, {
                "id": "problem-7",
                "html": "<div><strong>Problem 7 (10 points):</strong> Determine whether the series converges or diverges:<br /><br />$$\\sum_{n=1}^{\\infty} \\frac{n^2 + 1}{n^3 + 2n + 1}$$<br /><br />Justify your answer using an appropriate convergence test.</div>",
                "style": "margin: 15px 0; padding: 15px; background: #fafafa; border-radius: 5px;"
            }, {
                "id": "problem-8",
                "html": "<div><strong>Problem 8 (10 points):</strong> Find the Taylor series centered at $x = 0$ for:<br /><br />$$f(x) = \\frac{1}{1+x^2}$$<br /><br />Include the first 4 non-zero terms and the general term.</div>",
                "style": "margin: 15px 0; padding: 15px; background: #fafafa; border-radius: 5px;"
            }, {
                "id": "problem-9",
                "html": "<div><strong>Problem 9 (10 points):</strong> Use the ratio test to find the radius of convergence for:<br /><br />$$\\sum_{n=0}^{\\infty} \\frac{(2n)!}{(n!)^2 4^n} x^n$$</div>",
                "style": "margin: 15px 0; padding: 15px; background: #fafafa; border-radius: 5px;"
            }, {
                "id": "formula-sheet",
                "html": "<div style='border: 2px solid #333; padding: 15px; margin-top: 25px;'><h3 style='text-align: center; margin-bottom: 15px;'><strong>Formula Sheet</strong></h3><div style='display: grid; grid-template-columns: 1fr 1fr; gap: 15px; font-size: 12px;'><div><strong>Integration by Parts:</strong><br />$\\int u dv = uv - \\int v du$<br /><br /><strong>Trig Substitutions:</strong><br />$\\sqrt{a^2 - x^2} \\rightarrow x = a\\sin\\theta$<br />$\\sqrt{a^2 + x^2} \\rightarrow x = a\\tan\\theta$<br />$\\sqrt{x^2 - a^2} \\rightarrow x = a\\sec\\theta$</div><div><strong>Volume by Shells:</strong><br />$V = 2\\pi \\int_a^b x f(x) dx$<br /><br /><strong>Volume by Disks:</strong><br />$V = \\pi \\int_a^b [f(x)]^2 dx$<br /><br /><strong>Taylor Series:</strong><br />$f(x) = \\sum_{n=0}^{\\infty} \\frac{f^{(n)}(a)}{n!}(x-a)^n$</div></div></div>"
            }];

            document.getElementById('json-input').value = JSON.stringify(calculusContent, null, 2);
            generatePages();
        }

        // Auto-load example on page load
        window.addEventListener('load', () => {
            setTimeout(loadCalculusExample, 100);
        });
    </script>
  </body>
</html>
